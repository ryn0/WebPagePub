@model WebPagePub.WebApp.Models.MiniSearchBoxModel

@{
    var controller = Model?.Controller ?? "SitePageSearch";
    var action = Model?.Action ?? "Results";
    var qName = Model?.QueryName ?? "term";
    var placeholder = Model?.Placeholder ?? "Search pages…";
    var button = Model?.ButtonText ?? "Search";
    var initial = Model?.InitialValue ?? string.Empty;
    var wrapperClass = string.IsNullOrWhiteSpace(Model?.CssClass)
        ? "mini-search"
        : $"mini-search {Model.CssClass}";
}

<form method="get"
      asp-controller="@controller"
      asp-action="@action"
      class="@wrapperClass form-inline mb-3"
      role="search">
    <input type="text"
           name="@qName"
           value="@initial"
           maxlength="200"
           class="form-control"
           placeholder="@placeholder"
           aria-label="Search" autocomplete="off" />
    <button type="submit" class="btn btn-primary">@button</button>
</form>

<style>
    /* one-line at all widths */
    .mini-search.form-inline {
        display: flex !important;
        flex-wrap: nowrap !important;
        align-items: center;
        gap: .5rem;
        width: 100%;
    }

    /* input grows but can shrink on tiny screens */
    .mini-search .form-control {
        flex: 1 1 auto;
        min-width: 0;
        max-width: 100%;
    }

    .mini-search .btn {
        flex: 0 0 auto;
        white-space: nowrap;
    }

    /* ---- Compact on larger screens (keep a normal length) ---- */
    @@media (min-width: 768px) { /* tablet+ */
        .mini-search.form-inline

    {
        width: auto; /* stop filling the row */
        max-width: 560px; /* cap the overall search bar width */
    }

    .mini-search .form-control {
        flex: 1 0 22rem; /* sensible default length */
        max-width: 28rem; /* don’t let it get absurdly long */
    }

    }

    /* optional: slightly smaller button on very narrow phones */
    @@media (max-width: 375px) {
        .mini-search .btn

    {
        padding: .4rem .6rem;
    }

    }
</style>
